terraform {
  required_providers {
    controltower = {
      source = "idealo/controltower"
      version = "1.3.0"
    }
  }
}

provider "controltower" {
  region = "ap-southeast-1"
}

resource "controltower_aws_account" "account" {
  name                = "{{ first_name }} {{ last_name }}"
  email               = "{{ root_email }}"
  organizational_unit = "{{ ou }}"

  organizational_unit_id_on_delete = "ou-l547-j6ulduc0"
  close_account_on_delete = true

  sso {
    first_name = "{{ first_name }}"
    last_name  = "{{ last_name }}"
    email      = "{{ email }}"
  }
}
